"use-strict";

/**
 * add event listener on multiple elements
 */

const addEventOnElements = function (elements, eventType, callback) {
  for (let i = 0, len = elements.length; i < len; i++) {
    elements[i].addEventListener(eventType, callback);
  }
};

/**
 * NAVBAR TOGGLE FOR MOBILE
 */

const navbar = document.querySelector("[data-navbar]");
const navTogglers = document.querySelectorAll("[data-nav-toggler]");
const overlay = document.querySelector("[data-overlay]");

const toggleNavbar = function () {
  navbar.classList.toggle("active");
  overlay.classList.toggle("active");
  document.body.classList.toggle("nav-active");
};

addEventOnElements(navTogglers, "click", toggleNavbar);

/**
 * HEADER
 * active header when window scroll down to 100px
 */

const header = document.querySelector("[data-header]");

window.addEventListener("scroll", function () {
  if (window.scrollY > 100) {
    header.classList.add("active");
  } else {
    header.classList.remove("active");
  }
});

// const blog = document.querySelector("[data-nav-blog]");

// blog.addEventListener("click", function () {
//   alert("Feature coming soon!");
// });

/**
 * Contact
 * Clear form when submitted
 */

window.onbeforeunload = () => {
  for (const form of document.getElementsByTagName("form")) {
    form.reset();
  }
};

/**
 * Scroll Reveal
 *
 */

const revealElements = document.querySelectorAll("[data-reveal]");
const revealDelayElements = document.querySelectorAll("[data-reveal-delay]");

const reveal = function () {
  for (let i = 0, len = revealElements.length; i < len; i++) {
    if (revealElements[i].getBoundingClientRect().top < window.innerHeight) {
      revealElements[i].classList.add("revealed");
    }
  }
};

for (let i = 0, len = revealDelayElements.length; i < len; i++) {
  revealDelayElements[i].style.transitionDelay =
    revealDelayElements[i].dataset.revealDelay;
}

window.addEventListener("scroll", reveal);
window.addEventListener("load", reveal);

/**
 * Theme Toggler
 *
 */

const themeBtn = document.querySelectorAll(".theme-btn");

for (let i = 0; i < themeBtn.length; i++) {
  themeBtn[i].addEventListener("click", function () {
    //toggle `light-theme` and `dark-theme` class from body`
    //when `theme-btn is clicked
    document.body.classList.toggle("light-theme");
    document.body.classList.toggle("dark-theme");

    //store to local storage
    if (document.body.classList.contains("light-theme")) {
      localStorage.setItem("theme", "light-theme");
    } else {
      localStorage.setItem("theme", "dark-theme");
    }

    for (let i = 0; i < themeBtn.length; i++) {
      //When the `theme-btn` is clicked
      //it toggles classes between `light` and `dark` for all `theme-btn`
      themeBtn[i].classList.toggle("light");
      themeBtn[i].classList.toggle("dark");

      //store to local storage
      if (themeBtn[i].classList.contains("light")) {
        localStorage.setItem("mode", "light");
      } else {
        localStorage.setItem("mode", "dark");
      }
    }
  });
}

//get theme from local storage
const currentTheme = localStorage.getItem("theme");

if (currentTheme === "dark-theme") {
  document.body.classList.replace("light-theme", "dark-theme");

  for (let i = 0; i < themeBtn.length; i++) {
    themeBtn[i].classList.replace("light", "dark");
  }
}
